[toc]

# å‰è¨€

> **ç”³æ˜**:
>
> åŸè§†é¢‘ï¼š
>
> [é¢å‘å¯¹è±¡-è½¯ä»¶è®¾è®¡åŸåˆ™-1å°æ—¶ææ‡‚-æ³¢æ³¢é…±è€å¸ˆ_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1GG4y1Q7Bd/)
>
> æœ¬æ–‡ä¸ºupä¸»çš„è§†é¢‘æ•™å­¦æ€»ç»“æˆæ–‡æœ¬å’Œcode
>
> ä¸šä¸»è¦æ˜¯ä¸ºäº†Cpperå­¦ä¹ è€…å­¦ä¹ ã€‚å› ä¸ºupåœ¨è§†é¢‘ä¸­ä½¿ç”¨çš„æ˜¯javaæè¿°ã€‚

## ğŸ“ŒåŸºæœ¬æ¦‚å¿µ

1. ğŸ“Œ**å¯ç»´æŠ¤æ€§è´¨**

   åœ¨ä¸ç ´ååŸæœ‰ä»£ç è®¾è®¡ï¼Œä¸è¦å¼•å…¥æ–°bugçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç 

   **ç”Ÿæ´»æ¡ˆä¾‹**ï¼šæ¯”å¦‚ä¸€ä¸ªiPhoneåœ¨ç»´ä¿®æ‘„åƒå¤´çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªæ‰‹æŠ–ï¼Œå°±å¯èƒ½å‘†æ»å–‡å­æˆ–è€…éº¦å…‹é£æŸåï¼Œä»è€Œå½±å“äº†é€šè®¯æˆ–è€…éŸ³è§†é¢‘åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä»¬éƒ½é›†æˆåœ¨ä¸€ä¸ªç”µè·¯æ¿ä¸Šã€‚ä½†æ˜¯ï¼Œå•ååœ¨ç»´ä¿®çš„æ—¶å€™ï¼Œå°±ä¸å­˜åœ¨è¿™ç§æƒ…å†µâ€˜

2. ğŸ“Œ**å¯æ‰©å±•æ€§**

   åœ¨ä¸ä¿®æ”¹æˆ–è€…å°‘é‡ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•çš„æ–¹å¼æ·»åŠ æ–°çš„åŠŸèƒ½ä»£ç 

   **ç”Ÿæ´»æ¡ˆä¾‹**ï¼šä¸­ç§‹åˆ°äº†ï¼Œæ‹¿ç€iPhoneæƒ³è¦æ‹ä¸ªæœˆäº®å‘æœ‹å‹åœˆï¼Œä½†æ˜¯ä¸ç®¡æ€ä¹ˆæ‹ï¼Œæ•ˆæœéƒ½ä¸å¥½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œåªè§éš”å£è€ç‹æŠŠå•å‘è£…åœ¨ä¸‰è„šæ¶ä¸Šï¼Œç„¶åæ¢ä¸Šé•¿ç„¦é•œå¤´ï¼Œâ€œå’”åš“â€ä¸€å£°ï¼Œæˆ‘å‡‘è¿‡å»ä¸€çœ‹ï¼Œâ€œå“‡ï¼ŒçœŸçš„æ˜¯åˆå¤§åˆåœ†å•Šï¼â€ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå•åå¯ä»¥æ ¹æ®ä¸åŒçš„æ‹æ‘„åœºæ™¯ï¼Œæ‰©å±•ä¸åŒçš„é•œå¤´ã€‚

3. ğŸ“Œ**å¯å¤ç”¨æ€§**

   å°½é‡å‡å°‘ä»£ç çš„é‡å¤ç¼–å†™ï¼Œç›´æ¥å¤ç”¨å·²æœ‰çš„ä»£ç 

   **ç”Ÿæ´»æ¡ˆä¾‹**ï¼šå¼€å‘æ•™åŠ¡ç³»ç»Ÿçš„æ—¶å€™ï¼Œç›´æ¥å¤ç”¨æƒé™ç®¡ç†æ¨¡å—

4. ğŸ“Œ**å†…èšæ€§**

   æ¨¡å—å†…éƒ¨å…ƒç´ çš„ç´§å¯†ç¨‹åº¦ï¼Œå†…èšæ€§è¶Šé«˜ï¼Œé‚£ä¹ˆæ¨¡å—ç‹¬ç«‹æ€§è¶Šå¥½ï¼Œå¯ç»´æŠ¤æ€§ï¼Œå¤ç”¨æ€§ä¹Ÿè¶Šé«˜

5. ğŸ“Œ**è€¦åˆæ€§**

   æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œè€¦åˆåº¦è¶Šé«˜ï¼Œé‚£ä¹ˆæ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„å…³è”è¶Šå¤æ‚ï¼Œé‚£ä¹ˆå¯ç»´æŠ¤æ€§ï¼Œå¤ç”¨æ€§è¶Šå·®



# Design Principles

## ğŸŒŸå•ä¸€èŒè´£åŸåˆ™

### â­(SRP) Single Responsibility Principle

ä¸€ä¸ªç±»æˆ–è€…æ¨¡å—åªè´Ÿè´£å®Œæˆä¸€ä¸ªèŒè´£ï¼ˆæˆ–è€…åŠŸèƒ½ï¼‰ã€‚

é€šä¿—çš„è®²ï¼Œå¦‚æœè¿™ä¸ªç±»åŒ…å«ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¸ç›¸å¹²çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„èŒè´£å°±ä¸å¤Ÿå•ä¸€ï¼Œåº”è¯¥å°†å®ƒ**æ‹†åˆ†æˆå¤šä¸ªåŠŸèƒ½æ›´åŠ å•ä¸€ï¼Œç²’åº¦æ›´ç»†çš„ç±»**ã€‚

å•ä¸€èŒè´£åŸåˆ™æ˜¯å®ç°**é«˜å†…èšï¼Œä½è€¦åˆ**çš„æŒ‡å¯¼æ–¹é’ˆï¼Œå®ƒæ˜¯**æœ€ç®€å•ä½†åˆæœ€éš¾è¿ç”¨**çš„åŸåˆ™ï¼Œéœ€è¦è®¾è®¡äººå‘˜å‘ç°ç±»çš„ä¸åŒèŒè´£å¹¶å°†å…¶åˆ†ç¦»ï¼Œè€Œå‘ç°ç±»çš„å¤šé‡èŒè´£éœ€è¦è®¾è®¡äººå‘˜å…·æœ‰è¾ƒå¼ºçš„åˆ†æè®¾è®¡èƒ½åŠ›å’Œç›¸å…³å®ç°ç»éªŒã€‚

### Code

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/8a9641cfdc5d4ae1aee8f7f692820591.png#pic_center)


**old**

```cpp
#include <iostream>
#include <string>

class UserInfo {
private:
    long userID;
    std::string userName;
    std::string phone;
    std::string province;
    std::string city;
    std::string region;
    std::string detailAddress;

public:
    void save() {
        std::cout << "save user information" << std::endl;
    }

    void saveAddress() {
        std::cout << "save address information" << std::endl;
    }
};
```

**new**

```cpp
#include <iostream>
#include <list>
#include <string>

class Address {
private:
    std::string city;
    std::string region;
    std::string detailAddress;

public:
    void saveAddress() {
        std::cout << "save address information" << std::endl;
    }
};

class UserInfo {
private:
    long userID;
    std::string userName;
    std::string phone;
    std::string province;
    std::list<Address> addressList;

public:
    void save() {
        std::cout << "save user information" << std::endl;
    }
};
```



## ğŸŒŸé‡Œæ°æ›¿æ¢åŸåˆ™

### â­(LSP) Liskov Substitution Principle

**å­ç±»å¯¹è±¡èƒ½å¤Ÿæ›¿æ¢ç¨‹åºä¸­çˆ¶ç±»å¯¹è±¡å‡ºç°çš„ä»»ä½•åœ°æ–¹**ï¼Œå¹¶ä¸”ä¿è¯åŸæ¥ç¨‹åºçš„ç‘å‰è¡Œä¸ºä¸å˜åŠæ­£ç¡®æ€§ä¸è¢«ç ´å¿«ã€‚

é€šä¿—ç†è§£ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚

æ¢å¥è¯è¯´ï¼Œ**å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œé™¤æ·»åŠ æ–°çš„æ–¹æ³•å®Œæˆæ–°åŠŸèƒ½å¤–ï¼Œå°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•**ï¼Œå¦‚æœé‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œ**ç¨‹åºè¿è¡Œä¼šå‘ç”Ÿå‡ºé”™æ¦‚ç‡**ã€‚

å¦‚æœä¸€å®šè¦ç”¨å¤šæ€ï¼Œé‚£ä¹ˆçˆ¶ç±»å¯ä»¥è®¾è®¡æˆæŠ½è±¡çˆ¶ç±»æˆ–è€…æ¥å£ã€‚

### Code



![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/e0ea8a48a4054f2d9cb5077a1735a9f2.png#pic_center)


**old**

```cpp
#include <iostream>

// æ¥å£è¿‡äºåºå¤§
class PhoneFunction {
public:
    virtual void call() = 0;
    virtual void message() = 0;
    virtual void camera() = 0;
};

class ApplePhone : public PhoneFunction {
public:
    virtual void call() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
    virtual void message() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
    virtual void camera() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
};

class OldPhone : public PhoneFunction {
public:
    virtual void call() override {
        std::cout << "Old " << __func__ << std::endl;
    }
    virtual void message() override {
        std::cout << "Old " << __func__ << std::endl;
    }
    virtual void camera() override {
        std::cout << "Old " << __func__ << std::endl;
    }
};
```

**new**

```cpp
#include <iostream>

// æ¥å£ç²’åº¦æœ€å°
struct Call {
    virtual void call() = 0;
};

struct Message {
    virtual void message() = 0;
};

struct Camera {
    virtual void camera() = 0;
};

class ApplePhone : public Call, public Message, public Camera {
public:
    virtual void call() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
    virtual void message() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
    virtual void camera() override {
        std::cout << "Apple " << __func__ << std::endl;
    }
};

class OldPhone : public Call, public Message {
public:
    virtual void call() override {
        std::cout << "Old " << __func__ << std::endl;
    }
    virtual void message() override {
        std::cout << "Old " << __func__ << std::endl;
    }
};
```



## ğŸŒŸå¼€é—­åŸåˆ™

### â­(OCP) Open Closed Principle

**å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­**ã€‚

åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸è¦å»ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œå®ç°ä¸€ä¸ª**çƒ­æ‹”æ’**çš„æ•ˆæœã€‚

ç®€è€Œè¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤ä¸å‡çº§ã€‚

æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨**æ¥å£å’ŒæŠ½è±¡ç±»**ã€‚

å› ä¸ºæŠ½è±¡çµæ´»æ€§å¥½ï¼Œé€‚åº”æ€§å¹¿ï¼Œåªè¦æŠ½è±¡çš„åˆç†ï¼Œå¯ä»¥åŸºæœ¬ä¿æŒè½¯ä»¶æ¶æ„çš„ç¨³å®šã€‚

è€Œè½¯ä»¶ä¸­å¼‚å˜çš„ç»†èŠ‚å¯ä»¥ä»æŠ½è±¡æ´¾ç”Ÿçš„å®ç°ç±»æ¥è¿›è¡Œæ‰©å±•ï¼Œå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦æ ¹æ®éœ€æ±‚æ´¾ç”Ÿä¸€ä¸ªå®ç°ç±»æ¥æ‰©å±•å°±å¯ä»¥äº†ã€‚

### Code

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/097639c9c9dd471da446598243bde73f.png#pic_center)


**old**

```cpp
#include <ctime>
#include <iostream>
#include <string>

class Equation {
protected:
    int leftNum;
    int rightNum;
    int result;
    std::string op;

public:
    std::string toString() {
        return std::to_string(leftNum) + op + std::to_string(rightNum) + "=" +
               std::to_string(result);
    }

    int generateRandom(int min, int max) {
        return rand() % (max - min + 1) + min;
    }

    Equation generateEquation(std::string op) {
        leftNum = generateRandom(0, 100);
        rightNum = generateRandom(0, 100);
        if (op == "+") {
            result = leftNum + rightNum;
        } else if (op == "-") {
            result = leftNum - rightNum;
        }
        this->op = op;
        return *this;
    }
};

int main() {
    srand(time(0));
    Equation equation = Equation().generateEquation("-");
    std::cout << equation.toString() << std::endl;
}
```

**new**

```cpp
#include <ctime>
#include <iostream>
#include <string>

class Equation {
protected:
    int leftNum;
    int rightNum;
    int result;
    std::string op;

public:
    std::string toString() {
        return std::to_string(leftNum) + op + std::to_string(rightNum) + "=" +
               std::to_string(result);
    }

    int generateRandom(int min, int max) {
        return rand() % (max - min + 1) + min;
    }

    // æŠ½è±¡æ–¹æ³•
    // æ³¨æ„ï¼ŒC++ä¸­ï¼ŒæŠ½è±¡åŸºç±»æ— æ³•å®ä¾‹åŒ–ï¼Œå› æ­¤æ— æ³•ç›´æ¥è¿”å›`Equation`
    virtual Equation* generateEquation() = 0;
};

class AddEquation : public Equation {
public:
    Equation* generateEquation() override {
        leftNum = generateRandom(0, 100);
        rightNum = generateRandom(0, 100);
        result = leftNum + rightNum;
        this->op = "+";
        return this;
    }
};

class SubEquation : public Equation {
public:
    Equation* generateEquation() override {
        leftNum = generateRandom(0, 100);
        rightNum = generateRandom(0, 100);
        result = leftNum - rightNum;
        this->op = "-";
        return this;
    }
};

int main() {
    srand(time(0));
    // å¤šæ€
    Equation* equation = (new SubEquation())->generateEquation();
    std::cout << equation->toString() << std::endl;
    delete equation;

    equation = (new AddEquation())->generateEquation();
    std::cout << equation->toString() << std::endl;
    delete equation;
}
```



## ğŸŒŸä¾èµ–å€’ç½®åŸåˆ™

###  â­(DIP) Dependency Inversion Principle

æ¨¡å—ä¹‹é—´è¦**ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å®ç°ï¼Œè¦é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¸è¦é¢å‘å®ç°ç¼–ç¨‹**ã€‚

é«˜å±‚æ¨¡å—ä¸åº”è¯¥ç›´æ¥ä¾èµ–åº•å±‚æ¨¡å—ï¼Œè¿™æ ·å°±é™ä½äº†å®¢æˆ·ç«¯ä¸å®ç°æ¨¡å—é—´çš„è€¦åˆã€‚

### Code

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/ebdd5815628a459185b7d309a12b0259.png#pic_center)


**old**

```cpp
#include <iostream>

class IntelCpu {
public:
    void calculate() {
        std::cout << "IntelCpu " << __func__ << std::endl;
    }
};

class IntelMemory {
public:
    void storage() {
        std::cout << "IntelMemory " << __func__ << std::endl;
    }
};

class Computer {
private:
    IntelCpu intelCpu;
    IntelMemory intelMemory;

public:
    Computer() {
    }
    Computer(IntelCpu intelCpu, IntelMemory intelMemory) {
        this->intelCpu = intelCpu;
        this->intelMemory = intelMemory;
    }

    void startRun() {
        intelCpu.calculate();
        intelMemory.storage();
    }
};

int main() {
    IntelCpu intelCpu;
    IntelMemory intelMemory;
    Computer computer(intelCpu, intelMemory);
    computer.startRun();
}
```



![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/c39c8081d4434b46adead699b64f5a04.png#pic_center)


**new**

```cpp
#include <iostream>

class Cup {
public:
    virtual void calculate() = 0;
};

class Memory {
public:
    virtual void storage() = 0;
};

class IntelCpu : public Cup {
public:
    void calculate() override {
        std::cout << "IntelCpu " << __func__ << std::endl;
    }
};

class IntelMemory : public Memory {
public:
    void storage() override {
        std::cout << "IntelMemory " << __func__ << std::endl;
    }
};

class AmdCpu : public Cup {
public:
    void calculate() override {
        std::cout << "AmdCpu " << __func__ << std::endl;
    }
};

class AmdMemory : public Memory {
public:
    void storage() override {
        std::cout << "AmdMemory " << __func__ << std::endl;
    }
};

class Computer {
private:
    Cup* cpu;
    Memory* memory;

public:
    Computer() {
    }
    Computer(Cup* cpu, Memory* memory) {
        this->cpu = cpu;
        this->memory = memory;
    }

    void startRun() {
        cpu->calculate();
        memory->storage();
    }
};

int main() {
    Computer computer;

    IntelCpu intelCpu;
    IntelMemory intelMemory;
    computer = Computer(&intelCpu, &intelMemory);
    computer.startRun();

    AmdCpu amdCpu;
    AmdMemory amdMemory;
    computer = Computer(&amdCpu, &amdMemory);
    computer.startRun();
}
```



## ğŸŒŸæ¥å£éš”ç¦»åŸåˆ™

### â­(ISP) Interface Segregation Principle

å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–äºå®ƒä¸é€‚ç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªç±»å¯¹äºå¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚

ä¸€ä¸ªç±»å®ç°ä¸€ä¸ªæ¥å£ï¼Œå°±å¿…é¡»å®ç°è¿™ä¸ªæ¥å£çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœæ¥å£çš„è®¾è®¡è¿‡äºåºå¤§çš„è¯ï¼Œå®ç°ç±»å°±è¢«è¿«å®ç°ä¸éœ€è¦çš„æŠ½è±¡æ–¹æ³•ã€‚

### Code

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/ee38c3c70d6d4120afe7e86be7150f6f.png#pic_center)


**old**

```cpp
#include <iostream>

class Bird {
protected:
    double runSpeed;
    double flySpeed;

public:
    virtual void setRunSpeed(double runSpeed) {
        this->runSpeed = runSpeed;
    }

    virtual void setFlySpeed(double flySpeed) {
        this->flySpeed = flySpeed;
    }

    double calcFlyTime(double distance) {
        return distance / flySpeed;
    }

    double calcRunTime(double distance) {
        return distance / runSpeed;
    }
};

class Parrot : public Bird {
public:
    void studySpeak() {
        std::cout << __func__ << std::endl;
    }
};

class Ostrich : public Bird {
public:
    virtual void setFlySpeed(double flySpeed) override {
        this->flySpeed = 0;
    }
};

int main() {
    Bird* parrot = new Parrot();
    parrot->setFlySpeed(150.0);
    std::cout << "fly 300km" << std::endl;
    std::cout << "parrot uses " << parrot->calcFlyTime(300.0) << " hours"
              << std::endl;

    Bird* ostrich = new Ostrich();
    ostrich->setFlySpeed(150.0);
    std::cout << "fly 300km" << std::endl;
    std::cout << "ostrich uses " << ostrich->calcFlyTime(300.0) << " hours"
              << std::endl;
}
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/13c2167b190241c6ab4be780d2d0ac13.png#pic_center)


**new**

```cpp
#include <iostream>

class Bird {
protected:
    double runSpeed;
    double flySpeed;

public:
    virtual void setRunSpeed(double runSpeed) {
        this->runSpeed = runSpeed;
    }

    virtual void setFlySpeed(double flySpeed) {
        this->flySpeed = flySpeed;
    }

    double calcFlyTime(double distance) {
        return distance / flySpeed;
    }

    double calcRunTime(double distance) {
        return distance / runSpeed;
    }
};

class Parrot : public Bird {
public:
    void studySpeak() {
        std::cout << __func__ << std::endl;
    }
};

class Ostrich : public Bird {
public:
    virtual void setFlySpeed(double flySpeed) override {
        this->flySpeed = 0;
    }
};

int main() {
    Bird* parrot = new Parrot();
    parrot->setFlySpeed(150.0);
    std::cout << "fly 300km" << std::endl;
    std::cout << "parrot uses " << parrot->calcFlyTime(300.0) << " hours"
              << std::endl;

    Bird* ostrich = new Ostrich();
    ostrich->setFlySpeed(150.0);
    std::cout << "fly 300km" << std::endl;
    std::cout << "ostrich uses " << ostrich->calcFlyTime(300.0) << " hours"
              << std::endl;
}
```



## ğŸŒŸè¿ªç±³ç‰¹æ³•åˆ™

### â­(LOD) Law of Demeter

è¿ªç±³ç‰¹æ³•åˆ™æ¥è‡ªäº1987å¹´ç¾å›½ä¸œåŒ—å¤§å­¦çš„ä¸€ä¸ªåä¸ºDemeterçš„ä¸€ä¸ªé¡¹ç›®ï¼Œ**åªè·Ÿæœ‹å‹è”ç³»ï¼Œä¸è·Ÿâ€œé™Œç”Ÿäººâ€è¯´è¯**ã€‚

å¦‚æœä¸¤ä¸ªè½¯ä»¶å®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥å‘ç”Ÿç›´æ¥çš„äº’ç›¸è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è½¬å‘è¯¥è°ƒç”¨ã€‚

å…¶ç›®çš„æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚

### æ— å…·ä½“Code

> æ— å…·ä½“code
>
> è¿™ä¸ªå‘å±•åœ¨é¡¹ç›®ä¸­çš„å„ä¸ªæ¨¡å—è°ƒç”¨éå¸¸ä¹‹å¤šï¼Œéœ€è¦å¤šé¡¹ç›®ï¼Œä¸šåŠ¡éå¸¸ç†Ÿæ‚‰æ‰èƒ½æ­å»ºè‰¯å¥½çš„ç»“æ„ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/7cab7995ac014c6b9dd536ec654a6415.png#pic_center)


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/e547c9d9f9474bca8022d5473f4e0a17.png#pic_center)




## ğŸŒŸåˆæˆå¤ç”¨åŸåˆ™

### â­(CRP) Composite Reuse Principle

**å°½é‡å…ˆé€‚ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°**ã€‚

é€šå¸¸ç±»çš„å¤ç”¨åˆ†ä¸ºç»§æ‰¿å¤ç”¨å’Œåˆæˆå¤ç”¨ä¸¤ç§ã€‚

ç»§æ‰¿å¤ç”¨è™½ç„¶ç®€å•å’Œæ˜“å®ç°çš„ä¼˜ç‚¹ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š

1. ç»§æ‰¿å¤ç”¨ç ´åäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºç»§æ‰¿ä¼š**å°†çˆ¶ç±»çš„å®ç°ç»†èŠ‚æš´éœ²ç»™å­ç±»**ï¼Œçˆ¶ç±»å¯¹å­ç±»æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°ä¸ºâ€**ç™½ç®±**â€œå¤ç”¨ã€‚
2. å­ç±»ä¸çˆ¶ç±»çš„**è€¦åˆåº¦é«˜ã€‚çˆ¶ç±»çš„å®ç°çš„ä»»ä½•æ”¹å˜éƒ½ä¼šå¯¼è‡´å­ç±»çš„å®ç°å‘ç”Ÿå˜åŒ–**ï¼Œè¿™ä¸åˆ©äºç±»çš„æ‰©å±•å’Œç»´æŠ¤ã€‚

<u>é‡‡ç”¨ç»„åˆæˆ–èšåˆå¤ç”¨æ—¶ï¼Œå¯ä»¥å°†å·²æœ‰çš„å¯¹è±¡çº³å…¥æ–°å¯¹è±¡ä¸­ï¼Œä½¿ä¹‹æˆåŠŸæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†</u>ï¼Œæ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œå®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

1. å®ƒç»´æŒäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºæˆåˆ†å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚æ˜¯æ–°å¯¹è±¡çœ‹ä¸è§çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°â€**é»‘ç®±**â€œå¤ç”¨ã€‚
2. å¯¹è±¡é—´çš„**è€¦åˆåº¦ä½**ã€‚å¯ä»¥åœ¨ç±»çš„æˆå‘˜ä½ç½®å£°æ˜æŠ½è±¡ï¼ˆ**æŠ½è±¡ç±»æˆ–è€…æ¥å£**ï¼‰

### Code

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/566d48d222c94ddba4901bbcc508fe78.png#pic_center)


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/a3237c9abf144c2d9a88a4531f72e242.png#pic_center)


**old**

```cpp
#include <iostream>
#include <string>

class A {
protected:
    std::string name;
    int age;

public:
    void methodA() {
        std::cout << "A " << __func__ << std::endl;
    }
};

class B : public A {
public:
    void methodB() {
        std::cout << "B " << __func__ << std::endl;
    }
};

int main() {
    B b;
    b.methodA();
    b.methodB();
}
```

**new**

```cpp
#include <iostream>
#include <string>

class A {
protected:
    std::string name;
    int         age;

public:
    void methodA() {
        std::cout << "A " << __func__ << std::endl;
    }
};

// ç»§æ‰¿è½¬ç»„åˆ
class B {
private:
    // ä¸ç”¨çŸ¥é“açš„å…·ä½“ç»†èŠ‚
    A a;

public:
    void methodB() {
        std::cout << "B " << __func__ << std::endl;
    }
    // å¯ä»¥ç›´æ¥è½¬å‘ï¼Œä¹Ÿå¯ä»¥æ·»åŠ é¢å¤–æ“ä½œ
    void methodA() {
        a.methodA();
    }
};

int main() {
    B b;
    b.methodA();
    b.methodB();
}
```



---

---

---

# END

ç¬”è€…è®¾è®¡æ¨¡å¼å¼€æºä»“åº“ï¼š[cuber-lotus/DesignPattern (github.com)](https://github.com/cuber-lotus/DesignPattern)

## ğŸ”—è½¯ä»¶è®¾è®¡ä¹‹SOLIDåŸåˆ™

[è½¯ä»¶è®¾è®¡ä¹‹SOLIDåŸåˆ™](https://blog.csdn.net/CUBE_lotus/article/details/135233886)

## ğŸ”—è®¾è®¡æ¨¡å¼ æå»ºå¿  C++

[è®¾è®¡æ¨¡å¼ æå»ºå¿  C++](https://blog.csdn.net/CUBE_lotus/article/details/128322904)
## ğŸ”—æ•æ·è½¯ä»¶å¼€å‘ - é¢å‘å¯¹è±¡è®¾è®¡çš„åŸåˆ™

[æ•æ·è½¯ä»¶å¼€å‘ - é¢å‘å¯¹è±¡è®¾è®¡çš„åŸåˆ™](https://book.douban.com/subject/1140457/)

åœ¨æ•æ·è½¯ä»¶å¼€å‘ä¸­æå‡ºäº†ä»¥ä¸‹è®¾è®¡åŸåˆ™

**SRP å•ä¸€èŒè´£åŸåˆ™**

å°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› 

**OCP å¼€æ”¾å°é—­åŸåˆ™**

è½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ï¼‰åº”è¯¥æ˜¯å¯ä»¥æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹

**LSP Liskovæ›¿æ¢åŸåˆ™**

å­ç±»å‹å¿…é¡»èƒ½æ›¿æ¢æ¢ä»–ä»¬çš„åŸºæœ¬ç±»å‹

**DIP ä¾èµ–å€’ç½®åŸåˆ™**

æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ã€‚ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚

**ISP æ¥å£éš”ç¦»åŸåˆ™**

ä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºä»–ä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚æ¥å£å±äºå®¢æˆ·ï¼Œä¸å±äºä»–æ‰€åœ¨çš„ç±»å±‚æ¬¡ç»“æ„ã€‚

**REP é‡ç”¨å‘å¸ƒç­‰ä»·åŸåˆ™**

é‡ç”¨çš„ç²’åº¦å°±æ˜¯å‘å¸ƒçš„ç²’åº¦

**CCP å…±ç”¨é‡ç”¨åŸåˆ™**

ä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»åº”è¯¥æ˜¯å…±ç”¨é‡ç”¨çš„ã€‚å¦‚æœé‡ç”¨äº†åŒ…ä¸­çš„ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆå°±é‡ç”¨åŒ…ä¸­çš„æ‰€æœ‰ç±»ã€‚äº’ç›¸ä¹‹é—´æ²¡æœ‰ç´§å¯†è”ç³»çš„ç±»ä¸åº”è¯¥åœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚

**CRP å…±ç”¨å°é—­åŸåˆ™**

ä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»å¯¹äºåŒä¸€ä¸ªç±»æ€§è´¨çš„å˜åŒ–åº”è¯¥æ˜¯å…±åŒå°é—­çš„ã€‚ä¸€ä¸ªå˜åŒ–è‹¥å¯¹ä¸€ä¸ªåŒ…å½±å“ï¼Œåˆ™å°†å¯¹åŒ…ä¸­çš„æ‰€æœ‰ç±»äº§ç”Ÿå½±å“ï¼Œè€Œå¯¹å…¶ä»–çš„åŒ…ä¸é€ æˆä»»ä½•å½±å“ã€‚

**ADP æ— ä¾èµ–åŸåˆ™**

åœ¨åŒ…çš„ä¾èµ–å…³ç³»ä¸­ä¸å­˜åœ¨ç¯ã€‚ç»†èŠ‚ä¸åº”è¯¥è¢«ä¾èµ–ã€‚

**SDP ç¨³å®šä¾èµ–åŸåˆ™**

æœç€ç¨³å®šçš„æ–¹å‘ä¾èµ–ã€‚

**ASP ç¨³å®šæŠ½è±¡åŸåˆ™**

ä¸€ä¸ªåŒ…çš„æŠ½è±¡ç¨‹åº¦åº”è¯¥å’Œå…¶ä»–ç¨³å®šç¨‹åº¦ä¸€è‡´ã€‚
